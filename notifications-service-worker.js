let timeoutIds=[],allClients=null;onmessage=t=>{const e=t.data;isNotificationMessage(e)&&self.clients.matchAll().then(o=>{allClients=o}).then(()=>{clearAllSchedules(),scheduleNotifications(e.notifications)})};function clearAllSchedules(){for(let t of timeoutIds)clearTimeout(t)}function isNotificationMessage(t){return t?.type==="notification"}function scheduleNotifications(t){for(let e of t)timeoutIds.push(setTimeout(()=>{for(const o of allClients)o.postMessage(e)},e.scheduledAt-Date.now()))}
